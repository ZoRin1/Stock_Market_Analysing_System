define(["jquery","scrollto"],function(o,t){function s(i,e){this.opts=o.extend({},s.DEFAULTS,e),this.$el=o(i),this.scroll=new t.ScrollTo({dest:this.opts.dest,speed:this.opts.speed}),this._checkPosition(),"move"==this.opts.mode?this.$el.on("click",o.proxy(this._move,this)):this.$el.on("click",o.proxy(this._go,this)),o(window).on("scroll",o.proxy(this._checkPosition,this))}return s.DEFAULTS={mode:"move",dest:0,pos:o(window).height(),speed:800},s.prototype._move=function(){this.scroll.move()},s.prototype._go=function(){this.scroll.go()},s.prototype._checkPosition=function(){var t=this.$el;o(window).scrollTop()>this.opts.pos?t.css("display","block"):t.fadeOut()},o.fn.extend({backtop:function(o){return this.each(function(){new s(this,o)})}}),{BackTop:s}});